// gl batches

import lib/devices/gl/gl.a

class Gl_batch {
	Device->var device;
	var batch;
	Texture->var texture;
	
	func construct {
		self.texture = 0;
		self.device = new(Device).construct("gl batch");
		
		self.device.send 0x63;
		self.batch = self.device.arg1;
		
		return self;
	}
	
	func add_ivx(var ivx) {
		self.device.send 0x69, self.batch, ivx;
	}
	
	func set_texture(var texture) {
		self.texture = texture;
	}
	
	func draw {
		if (self.texture) {
			Gl.bind_texture 0, self.texture;
		}
		
		self.device.send 0x70, self.batch;
	}
}
