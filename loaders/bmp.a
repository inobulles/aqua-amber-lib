// load Windows bitmap files

import lib/devices/graphics/texture.a
import lib/devices/io/fs.a

class Bmp {
	func create_texture(var path) { // static
		var data; var bytes;
		if (Fs.read(path, &data, &bytes)) {
			print "WARNING Failed to load BMP file (probably wrong path, " ++ path ++ ")\n";
			return 0;
		}
		
		Device->var device = new(Device).construct("bmp");
		var result = device.send(data, bytes);
		
		mfree device.arg0, device.arg1;
		
		var texture = new(Texture);
		texture.id = ?result;
		return texture;
	}
}
